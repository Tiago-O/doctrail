<div class="container">
  <h2><%= @doc.title %></h2>
  <p><%= @doc.rich_body %></p>

  <p><%= link_to 'Edit this document', edit_doc_path(@doc), class: 'btn btn-primary' %></p>

  <%= simple_form_for @userdoc do |f|%>
    <%= f.input :doc_id, as: :hidden, input_html: { value: @doc.id } %>
    <%= f.input :user_id, label:'Add user:', collection: @doc.doc_uninvited_users, label_method: :first_name %>
    <%= f.submit 'Add user', class: 'btn btn-primary mb-4' %>
  <% end %>

  <% if @doc.locked %>
    <p class='btn btn-secundary mb-4' >Document is locked</p>
  <% else %>
    <%= link_to 'New Version', new_doc_version_path(@doc), class: 'btn btn-primary mb-4' %>
  <% end %>

  <% if @doc.versions.present? %>
    <% if @doc.versions.count == 1 %>
      <h5>Version:</h5>
    <% else %>
      <h5>Versions:</h5>
    <% end %>
    <% @doc.versions.reverse_each  do |version| %>
    <p><%= link_to "at #{version.created_at.strftime("%-d %b %Y, %H:%M")}", version_path(version), class: 'btn btn-secundary' %></p>
    <% end %>
  <% else %>
    <p>This documents has no versions yet</p>
  <% end %>

  <p><%= link_to 'Return to Dashboard', user_path(current_user), class: 'btn btn-primary' %></p>

</div>
